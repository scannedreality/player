// This file was autogenerated by shaderbind. Do not modify.

#include "vulkan_xrvideo_shader_normal_shading.binding.hpp"

#include <libvis/vulkan/device.h>

using namespace vis;

namespace vulkan_xrvideo_shader_normal_shading {

bool CreateDescriptorSet0Layout(VulkanDescriptorSetLayout* layout, const VulkanDevice& device, const DescriptorSet0Config* config) {
  layout->AddBinding(0, (config && config->VertexUBODynamic) ? VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC : VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER, 1, VK_SHADER_STAGE_VERTEX_BIT);
  layout->AddBinding(1, (config && config->DeformationStateStorageBufferDynamic) ? VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC : VK_DESCRIPTOR_TYPE_STORAGE_BUFFER, 1, VK_SHADER_STAGE_VERTEX_BIT);
  
  return layout->Initialize(device);
}

void DescriptorSet0::Update(
      const VkDescriptorBufferInfo* VertexUBO,
      const VkDescriptorBufferInfo* DeformationStateStorageBuffer) {
  VkWriteDescriptorSet writeDescriptorSet[2];
  writeDescriptorSet[0] = VkWriteDescriptorSet{};
  writeDescriptorSet[0].sType = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET;
  writeDescriptorSet[0].descriptorType = descriptor_types_[0];
  writeDescriptorSet[0].descriptorCount = 1;
  writeDescriptorSet[0].dstSet = descriptor_set_;
  writeDescriptorSet[0].dstBinding = 0;
  writeDescriptorSet[0].pBufferInfo = VertexUBO;
  writeDescriptorSet[1] = VkWriteDescriptorSet{};
  writeDescriptorSet[1].sType = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET;
  writeDescriptorSet[1].descriptorType = descriptor_types_[1];
  writeDescriptorSet[1].descriptorCount = 1;
  writeDescriptorSet[1].dstSet = descriptor_set_;
  writeDescriptorSet[1].dstBinding = 1;
  writeDescriptorSet[1].pBufferInfo = DeformationStateStorageBuffer;
  logical_device_->Api().vkUpdateDescriptorSets(*logical_device_, 2, writeDescriptorSet, 0, nullptr);
}

void DescriptorSet0::UpdateVertexUBO(
      const VkDescriptorBufferInfo* VertexUBO) {
  VkWriteDescriptorSet writeDescriptorSet[1];
  writeDescriptorSet[0] = VkWriteDescriptorSet{};
  writeDescriptorSet[0].sType = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET;
  writeDescriptorSet[0].descriptorType = descriptor_types_[0];
  writeDescriptorSet[0].descriptorCount = 1;
  writeDescriptorSet[0].dstSet = descriptor_set_;
  writeDescriptorSet[0].dstBinding = 0;
  writeDescriptorSet[0].pBufferInfo = VertexUBO;
  logical_device_->Api().vkUpdateDescriptorSets(*logical_device_, 1, writeDescriptorSet, 0, nullptr);
}

void DescriptorSet0::UpdateDeformationStateStorageBuffer(
      const VkDescriptorBufferInfo* DeformationStateStorageBuffer) {
  VkWriteDescriptorSet writeDescriptorSet[1];
  writeDescriptorSet[0] = VkWriteDescriptorSet{};
  writeDescriptorSet[0].sType = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET;
  writeDescriptorSet[0].descriptorType = descriptor_types_[1];
  writeDescriptorSet[0].descriptorCount = 1;
  writeDescriptorSet[0].dstSet = descriptor_set_;
  writeDescriptorSet[0].dstBinding = 1;
  writeDescriptorSet[0].pBufferInfo = DeformationStateStorageBuffer;
  logical_device_->Api().vkUpdateDescriptorSets(*logical_device_, 1, writeDescriptorSet, 0, nullptr);
}

}
